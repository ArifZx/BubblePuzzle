<!DOCTYPE html>
<html>

<head>
  <title>Puzzle Bubble</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.22.0/dist/phaser.min.js"></script>
  <script defer id="game-script" src="dist/app.js"></script>
</head>

<body style="background-color: #000000;">
  <div id="loading" style="position: absolute; left: 50%; top: 50%;">
    <div id="loadingText" style="position: relative; color: white; font-size: 4rem; left: -50%;">
      loading
    </div>
  </div>
  <div id="game" style="height: 100%;"></div>


  <script>
    let loadingText = "";
    let loadingProgress = 0;
    let counter = 0;
    const loadingHandler = setInterval(() => {
      const loadingElement = document.getElementById("loading");
      if (loadingElement) {
        if (counter % 4 === 0) {
          loadingText = "loading";
        } else {
          loadingText = "." + loadingText + ".";
        }

        document.getElementById("loadingText").innerHTML = loadingText;
      } else {
        clearInterval(loadingHandler);
      }
      counter++;
    }, 1000);


    // const req = new XMLHttpRequest();

    // req.addEventListener("progress", event => {
    //   if(event.lengthComputable) {
    //     loadingProgress = 100 * (event.loaded / event.total);
    //   }
    // }, false);

    // req.addEventListener("load", event => {
    //   const target = event.target;
    //   const script = document.createElement("script");
    //   script.innerHTML = target.responseText;
    //   document.documentElement.appendChild(script);
    // });


    // req.open("GET", "dist/app.js");
    // req.send();


    // const body = document.querySelector("body");
    // const phaserReq = new XMLHttpRequest();

    // phaserReq.addEventListener("load", event => {

    //   const phaserSrcipt = document.createElement("script");
    //   phaserSrcipt.innerHTML = event.target.responseText;
    //   body.appendChild(phaserSrcipt);


    //   const gameReq = new XMLHttpRequest();

    //   gameReq.addEventListener("load", event => {
    //     const gameSrcipt = document.createElement("script");
    //     gameSrcipt.innerHTML = event.target.responseText;
    //     body.appendChild(gameSrcipt);
    //   })

    //   gameReq.open("GET", "dist/app.js");
    //   gameReq.send();
    // });

    // phaserReq.open("GET", "https://cdn.jsdelivr.net/npm/phaser@3.22.0/dist/phaser.min.js");
    // phaserReq.send();
  </script>
</body>

</html>